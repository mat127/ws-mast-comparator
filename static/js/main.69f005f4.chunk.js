(this["webpackJsonpws-mast-comparator"]=this["webpackJsonpws-mast-comparator"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){var n={"./2011.json":[19,3],"./2012.json":[20,4],"./2013.json":[21,5],"./2014.json":[22,6],"./2017.json":[23,7],"./2019.json":[24,8]};function a(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return r.e(t[1]).then((function(){return r.t(a,3)}))}a.keys=function(){return Object.keys(n)},a.id=16,e.exports=a},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(8),s=r.n(a),i=r(2),c=r(6),o=r(5),l=r(3),u=r(4),h=r(1),d=r.n(h),f=(r(14),function(){function e(t){Object(l.a)(this,e),t?(this.size=new Set(t.size),this.year=new Set(t.year)):(this.size=new Set(["SDM","RDM"]),this.year=new Set([2019]))}return Object(u.a)(e,[{key:"clone",value:function(){return new e(this)}},{key:"filter",value:function(e){return this.filterSize(e.size)&&this.filterYear(e.year)}},{key:"filterSize",value:function(e){return!(this.size.size>0)||this.size.has(e)}},{key:"filterYear",value:function(e){return!(this.year.size>0)||this.year.has(e)}}],[{key:"createDefaultOptions",value:function(){return{size:[],year:[]}}},{key:"createOptions",value:function(e){var t=e.reduce((function(e,t){return e.add(t.year)}),new Set),r=e.reduce((function(e,t){return e.add(t.size)}),new Set);return{size:Array.from(r),year:Array.from(t)}}}]),e}()),p=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props.options,r=this.props.state;return Object(n.jsxs)("div",{id:"filter",children:[Object(n.jsx)(m,{label:"Size:",options:t.size,state:r.size,onChange:function(t){return e.sizeChanged(t)}}),Object(n.jsx)(m,{label:"Year:",options:t.year,state:r.year,onChange:function(t){return e.yearChanged(t)}})]})}},{key:"optionChanged",value:function(e,t){e.target.checked?t.add(e.target.id):t.delete(e.target.id)}},{key:"sizeChanged",value:function(e){var t=this;this.props.onChange((function(r){return t.optionChanged(e,r.size)}))}},{key:"yearChanged",value:function(e){var t=parseInt(e.target.id);this.props.onChange((function(r){e.target.checked?r.year.add(t):r.year.delete(t)}))}}]),r}(d.a.Component);function m(e){var t=e.options.map((function(t){return Object(n.jsx)(j,{id:t,checked:e.state.has(t),onChange:e.onChange},t)}));return Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{className:"group",children:e.label}),t]})}function j(e){return Object(n.jsxs)("div",{className:"block",children:[Object(n.jsx)("input",Object(i.a)({type:"checkbox"},e)),Object(n.jsx)("label",{htmlFor:e.id,children:e.id})]})}r(15);function b(){return e=[2019,2017,2014,2013,2012,2011],Promise.all(e.map((function(e){return t=e,r(16)("./"+t+".json").then((function(e){return function(e,t){e.forEach((function(e){e.year=t}))}(e.default,t),e.default}));var t}))).then((function(e){var t=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}(e);return t.forEach((function(e,t){e.id=t})),t}));var e}var v=function(){function e(t,r,n){Object(l.a)(this,e),this.min=t,this.max=r,this.className=n}return Object(u.a)(e,[{key:"includes",value:function(e){return e>=this.min&&e<=this.max}},{key:"getTypical",value:function(){return(this.min+this.max)/2}}],[{key:"getClassOf",value:function(e){return this.All.find((function(t){return t.includes(e)}))}},{key:"getClassNameOf",value:function(e){var t=this.getClassOf(e);return t?t.className:void 0}}]),e}();v.HardTop=new v(1,5,"hard-top"),v.ConstantCurve=new v(6,10,"constant-curve"),v.FlexTop=new v(11,15,"flex-top"),v.All=[v.HardTop,v.ConstantCurve,v.FlexTop];var O=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).state={allMasts:[],comparedMasts:[],highlightedProfile:void 0,filter:{state:new f,options:f.createDefaultOptions()}},b().then((function(e){return n.setMastData(e),e})),n}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[Object(n.jsx)(p,{state:this.state.filter.state,options:this.state.filter.options,onChange:function(t){return e.filterChanged(t)}}),Object(n.jsxs)("table",{children:[Object(n.jsx)(y,{comparator:this}),Object(n.jsxs)("tbody",{children:[Object(n.jsx)(x,{masts:this.state.comparedMasts,comparator:this}),Object(n.jsx)(g,{comparator:this}),Object(n.jsx)(k,{comparator:this}),Object(n.jsx)(C,{masts:this.state.allMasts,filter:function(t){return e.state.filter.state.filter(t)},comparator:this})]})]})]})}},{key:"setMastData",value:function(e){this.setState({allMasts:e,filter:{state:this.state.filter.state,options:f.createOptions(e)}})}},{key:"filterChanged",value:function(e){var t=this.state.filter.state.clone();e(t),this.setState({filter:{state:t,options:this.state.filter.options}})}},{key:"compare",value:function(e){var t={comparedMasts:this.state.comparedMasts.concat([e])};t.highlightedProfile=t.comparedMasts[0].profile,this.setState(t)}},{key:"remove",value:function(e){var t={comparedMasts:this.state.comparedMasts.filter((function(t){return t!==e}))};t.highlightedProfile=t.comparedMasts.length>0?t.comparedMasts[0].profile:void 0,this.setState(t)}},{key:"removeAll",value:function(){this.setState({comparedMasts:[],highlightedProfile:void 0})}},{key:"isCompared",value:function(e){return this.state.comparedMasts.includes(e)}},{key:"isAnyCompared",value:function(){return this.state.comparedMasts.length>0}},{key:"isHighlighted",value:function(e){return this.state.highlightedProfile===e}},{key:"isHighlightedClass",value:function(e){return e.includes(this.state.highlightedProfile)}},{key:"sortProfileFirst",value:function(e){var t=this,r={allMasts:Array.from(this.state.allMasts).sort((function(r,n){return t.compareToProfile(r,n,e)}))};this.isAnyCompared()||(r.highlightedProfile=e),this.setState(r)}},{key:"getProfileClassName",value:function(e){var t=v.getClassNameOf(e);return this.isHighlighted(e)&&(t+=" highlighted"),t}},{key:"sortByName",value:function(e){var t={allMasts:Array.from(this.state.allMasts).sort(e)};this.isAnyCompared()||(t.highlightedProfile=void 0),this.setState(t)}},{key:"sortByNameDescending",value:function(){var e=this;this.sortByName((function(t,r){return-1*e.compareMastName(t,r)}))}},{key:"sortByNameAscending",value:function(){this.sortByName(this.compareMastName)}},{key:"compareToMast",value:function(e,t,r){return e===r?-1:t===r?1:this.compareToProfile(e,t,r.profile)}},{key:"compareToProfile",value:function(e,t,r){var n=Math.abs(e.profile-r)-Math.abs(t.profile-r);return 0===n?this.compareMastName(e,t):n}},{key:"compareMastName",value:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}}]),r}(d.a.Component);function y(e){var t=e.comparator,r=function(e){var r=e.className;return t.isHighlightedClass(e)&&(r+=" highlighted"),r};return Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Producer"}),Object(n.jsx)("th",{children:"Year"}),Object(n.jsx)("th",{children:"Size"}),Object(n.jsx)("th",{children:"Length"}),Object(n.jsx)("th",{colSpan:"5",className:r(v.HardTop),children:Object(n.jsx)("span",{title:"Sort hard top first",className:"clickable",onClick:function(){return t.sortProfileFirst(v.HardTop.getTypical())},children:"Hard top"})}),Object(n.jsx)("th",{colSpan:"5",className:r(v.ConstantCurve),children:Object(n.jsx)("span",{title:"Sort constant curve first",className:"clickable",onClick:function(){return t.sortProfileFirst(v.ConstantCurve.getTypical())},children:"Constant curve"})}),Object(n.jsx)("th",{colSpan:"5",className:r(v.FlexTop),children:Object(n.jsx)("span",{title:"Sort flex top first",className:"clickable",onClick:function(){return t.sortProfileFirst(v.FlexTop.getTypical())},children:"Flex Top"})})]})})}var g=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"19",style:{textAlign:"left"},children:this.props.comparator.isAnyCompared()?this.renderNonEmpty():this.renderEmpty()})})}},{key:"renderEmpty",value:function(){return Object(n.jsx)("span",{children:"Use the \u271a icon next to a producer name to add the mast to the comparison."})}},{key:"renderNonEmpty",value:function(){var e=this;return Object(n.jsx)("button",{onClick:function(){return e.props.comparator.removeAll()},children:"Remove all compared masts above."})}}]),r}(d.a.Component),k=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.comparator;return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"header",children:["Producer",Object(n.jsx)("span",{title:"Sort ascending by producer name",className:"clickable left-padded",onClick:function(){return e.sortByNameAscending()},children:"\u25b2"}),Object(n.jsx)("span",{title:"Sort descending by producer name",className:"clickable",onClick:function(){return e.sortByNameDescending()},children:"\u25bc"})]}),Object(n.jsx)("td",{className:"header",children:"Year"}),Object(n.jsx)("td",{className:"header",children:"Size"}),Object(n.jsx)("td",{className:"header",children:"Length"}),this.getProfileColumns()]})}},{key:"getProfileColumns",value:function(){for(var e=this,t=this.props.comparator,r=Array(15),a=function(a){r[a-1]=Object(h.createElement)("td",Object(i.a)(Object(i.a)({},e.props),{},{key:a,className:t.getProfileClassName(a)}),Object(n.jsx)("span",{title:"Sort this profile first",className:"clickable",onClick:function(){return t.sortProfileFirst(a)},children:"\u25bc"}))},s=1;s<=r.length;s++)a(s);return r}}]),r}(d.a.Component);function x(e){var t=e.comparator;return e.masts.map((function(r){return Object(h.createElement)(N,Object(i.a)(Object(i.a)({},e),{},{mast:r,buttons:(a=r,[Object(n.jsx)("span",{title:"Remove from comparison",className:"clickable",onClick:function(){return t.remove(a)},children:"\u2716"},"remove")]),key:r.id}));var a}))}function C(e){var t=e.comparator;return e.masts.filter((function(r){return!t.isCompared(r)&&e.filter(r)})).map((function(r){return Object(h.createElement)(N,Object(i.a)(Object(i.a)({},e),{},{mast:r,buttons:(a=r,[Object(n.jsx)("span",{title:"Add to comparison",className:"clickable",onClick:function(){return t.compare(a)},children:"\u271a"},"add")]),key:r.id}));var a}))}function N(e){return Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"mast-name",children:[e.buttons,Object(n.jsx)("span",{className:"left-padded",children:e.mast.name})]}),Object(n.jsx)("td",{children:e.mast.year}),Object(n.jsx)("td",{children:e.mast.size}),Object(n.jsx)("td",{children:e.mast.length}),Object(n.jsx)(M,Object(i.a)({},e))]})}var M=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return this.calculateColumnValues(this.props.mast.profile).map((function(t,r){return e.renderColumn(r+1,t)}))}},{key:"renderColumn",value:function(e,t){var r=this.props.comparator;return Object(n.jsx)("td",{className:r.getProfileClassName(e),children:t?this.renderClickableMark((function(){return r.sortProfileFirst(e)})):""},e)}},{key:"renderClickableMark",value:function(e){return Object(n.jsx)("span",{className:"clickable",onClick:e,children:"\u25cf"})}},{key:"calculateColumnValues",value:function(e){for(var t=new Array(15),r=0;r<t.length;r++)t[r]=Math.abs(e-(r+1))<=1;return t}}]),r}(d.a.Component);r(17);s.a.render(Object(n.jsx)(O,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.69f005f4.chunk.js.map