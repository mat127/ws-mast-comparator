(this["webpackJsonpws-mast-comparator"]=this["webpackJsonpws-mast-comparator"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){var a={"./2011.json":[19,3],"./2012.json":[20,4],"./2013.json":[21,5],"./2014.json":[22,6],"./2017.json":[23,7],"./2019.json":[24,8]};function n(e){if(!r.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],n=t[0];return r.e(t[1]).then((function(){return r.t(n,3)}))}n.keys=function(){return Object.keys(a)},n.id=16,e.exports=n},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(8),i=r.n(n),s=r(2),c=r(6),o=r(5),l=r(3),u=r(4),h=r(1),f=r.n(h),d=(r(14),function(){function e(t){Object(l.a)(this,e),t?(this.diameter=new Set(t.diameter),this.year=new Set(t.year),this.namePrefix=new Set(t.namePrefix)):(this.diameter=new Set(["SDM","RDM"]),this.year=new Set([2019]),this.namePrefix=new Set)}return Object(u.a)(e,[{key:"clone",value:function(){return new e(this)}},{key:"filter",value:function(e){return this.filterDiameter(e.diameter)&&this.filterYear(e.year)&&this.filterName(e.name)}},{key:"filterDiameter",value:function(e){return!(this.diameter.size>0)||this.diameter.has(e)}},{key:"filterYear",value:function(e){return!(this.year.size>0)||this.year.has(e)}},{key:"filterName",value:function(e){var t=e.substr(0,1).toUpperCase();return!(this.namePrefix.size>0)||this.namePrefix.has(t)}}],[{key:"createDefaultOptions",value:function(){return{diameter:[],year:[],namePrefix:[]}}},{key:"createOptions",value:function(e){var t={diameter:new Set,year:new Set,namePrefix:new Set};return e.forEach((function(e){t.diameter.add(e.diameter),t.year.add(e.year),t.namePrefix.add(e.name.substr(0,1).toUpperCase())})),(t={diameter:Array.from(t.diameter),year:Array.from(t.year),namePrefix:Array.from(t.namePrefix)}).year.sort((function(e,t){return t-e})),t.namePrefix.sort(),t}}]),e}()),m=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.props.options,r=this.props.state;return Object(a.jsxs)("div",{id:"filter",children:[Object(a.jsx)(p,{label:"Diameter:",options:t.diameter,state:r.diameter,onChange:function(t){return e.diameterChanged(t)}}),Object(a.jsx)(p,{label:"Year:",options:t.year,state:r.year,onChange:function(t){return e.yearChanged(t)}}),Object(a.jsx)("button",{className:"clear",onClick:function(t){return e.clearYearFilter()},children:"Clear"}),Object(a.jsx)(b,{options:t.namePrefix,state:r.namePrefix,onChange:function(t){return e.namePrefixChanged(t)}}),Object(a.jsx)("button",{className:"clear",onClick:function(t){return e.clearNamePrefixFilter()},children:"Clear"})]})}},{key:"diameterChanged",value:function(e){var t=e.target.id;this.props.onChange((function(r){e.target.checked?r.diameter.add(t):r.diameter.delete(t)}))}},{key:"yearChanged",value:function(e){var t=parseInt(e.target.id);this.props.onChange((function(r){e.target.checked?r.year.add(t):r.year.delete(t)}))}},{key:"clearYearFilter",value:function(){this.props.onChange((function(e){e.year.clear()}))}},{key:"namePrefixChanged",value:function(e){var t=e.target.id;this.props.onChange((function(e){e.namePrefix.has(t)?e.namePrefix.delete(t):e.namePrefix.add(t)}))}},{key:"clearNamePrefixFilter",value:function(){this.props.onChange((function(e){e.namePrefix.clear()}))}}]),r}(f.a.Component);function p(e){var t=e.options.map((function(t){return Object(a.jsx)(j,{id:t,checked:e.state.has(t),onChange:e.onChange},t)}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{className:"group",children:e.label}),t]})}function j(e){return Object(a.jsxs)("div",{className:"block",children:[Object(a.jsx)("input",Object(s.a)({type:"checkbox"},e)),Object(a.jsx)("label",{htmlFor:e.id,children:e.id})]})}function b(e){var t=e.options.map((function(t){return Object(a.jsx)(v,{prefix:t,state:e.state,onChange:e.onChange},t)}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{className:"group",children:"Producer:"}),t]})}function v(e){var t="name-prefix";return e.state.has(e.prefix)&&(t+=" name-prefix-checked"),Object(a.jsx)("button",{className:t,id:e.prefix,onClick:e.onChange,children:e.prefix})}r(15);function O(){return e=[2019,2017,2014,2013,2012,2011],Promise.all(e.map((function(e){return t=e,r(16)("./"+t+".json").then((function(e){return function(e,t){e.forEach((function(e){e.year=t}))}(e.default,t),e.default}));var t}))).then((function(e){var t=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])}(e);return t.forEach((function(e,t){e.id=t})),t}));var e}var y=function(){function e(t,r,a){Object(l.a)(this,e),this.min=t,this.max=r,this.className=a}return Object(u.a)(e,[{key:"includes",value:function(e){return e>=this.min&&e<=this.max}},{key:"getTypical",value:function(){return(this.min+this.max)/2}}],[{key:"getClassOf",value:function(e){return this.All.find((function(t){return t.includes(e)}))}},{key:"getClassNameOf",value:function(e){var t=this.getClassOf(e);return t?t.className:void 0}}]),e}();y.HardTop=new y(1,5,"hard-top"),y.ConstantCurve=new y(6,10,"constant-curve"),y.FlexTop=new y(11,15,"flex-top"),y.All=[y.HardTop,y.ConstantCurve,y.FlexTop];var x=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var a;return Object(l.a)(this,r),(a=t.call(this,e)).state={allMasts:[],comparedMasts:[],highlightedProfile:void 0,filter:{state:new d,options:d.createDefaultOptions()}},O().then((function(e){return a.setMastData(e),e})),a}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(m,{state:this.state.filter.state,options:this.state.filter.options,onChange:function(t){return e.filterChanged(t)}}),Object(a.jsxs)("table",{children:[Object(a.jsx)(g,{comparator:this}),Object(a.jsxs)("tbody",{children:[Object(a.jsx)(N,{masts:this.state.comparedMasts,comparator:this}),Object(a.jsx)(k,{comparator:this}),Object(a.jsx)(C,{comparator:this}),Object(a.jsx)(P,{masts:this.state.allMasts,filter:function(t){return e.state.filter.state.filter(t)},comparator:this})]})]})]})}},{key:"setMastData",value:function(e){this.setState({allMasts:e,filter:{state:this.state.filter.state,options:d.createOptions(e)}})}},{key:"filterChanged",value:function(e){var t=this.state.filter.state.clone();e(t),this.setState({filter:{state:t,options:this.state.filter.options}})}},{key:"compare",value:function(e){var t={comparedMasts:this.state.comparedMasts.concat([e])};t.highlightedProfile=t.comparedMasts[0].profile,this.setState(t)}},{key:"remove",value:function(e){var t={comparedMasts:this.state.comparedMasts.filter((function(t){return t!==e}))};t.highlightedProfile=t.comparedMasts.length>0?t.comparedMasts[0].profile:void 0,this.setState(t)}},{key:"removeAll",value:function(){this.setState({comparedMasts:[],highlightedProfile:void 0})}},{key:"isCompared",value:function(e){return this.state.comparedMasts.includes(e)}},{key:"isAnyCompared",value:function(){return this.state.comparedMasts.length>0}},{key:"isHighlighted",value:function(e){return this.state.highlightedProfile===e}},{key:"isHighlightedClass",value:function(e){return e.includes(this.state.highlightedProfile)}},{key:"sortProfileFirst",value:function(e){var t=this,r={allMasts:Array.from(this.state.allMasts).sort((function(r,a){return t.compareToProfile(r,a,e)}))};this.isAnyCompared()||(r.highlightedProfile=e),this.setState(r)}},{key:"getProfileClassName",value:function(e){var t=y.getClassNameOf(e);return this.isHighlighted(e)&&(t+=" highlighted"),t}},{key:"sortByName",value:function(e){var t={allMasts:Array.from(this.state.allMasts).sort(e)};this.isAnyCompared()||(t.highlightedProfile=void 0),this.setState(t)}},{key:"sortByNameDescending",value:function(){var e=this;this.sortByName((function(t,r){return-1*e.compareMastName(t,r)}))}},{key:"sortByNameAscending",value:function(){this.sortByName(this.compareMastName)}},{key:"compareToMast",value:function(e,t,r){return e===r?-1:t===r?1:this.compareToProfile(e,t,r.profile)}},{key:"compareToProfile",value:function(e,t,r){var a=Math.abs(e.profile-r)-Math.abs(t.profile-r);return 0===a?this.compareMastName(e,t):a}},{key:"compareMastName",value:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}}]),r}(f.a.Component);function g(e){var t=e.comparator,r=function(e){var r=e.className;return t.isHighlightedClass(e)&&(r+=" highlighted"),r};return Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Producer"}),Object(a.jsx)("th",{children:"Year"}),Object(a.jsx)("th",{children:"Diameter"}),Object(a.jsx)("th",{children:"Length"}),Object(a.jsx)("th",{colSpan:"5",className:r(y.HardTop),children:Object(a.jsx)("span",{title:"Sort hard top first",className:"clickable",onClick:function(){return t.sortProfileFirst(y.HardTop.getTypical())},children:"Hard top"})}),Object(a.jsx)("th",{colSpan:"5",className:r(y.ConstantCurve),children:Object(a.jsx)("span",{title:"Sort constant curve first",className:"clickable",onClick:function(){return t.sortProfileFirst(y.ConstantCurve.getTypical())},children:"Constant curve"})}),Object(a.jsx)("th",{colSpan:"5",className:r(y.FlexTop),children:Object(a.jsx)("span",{title:"Sort flex top first",className:"clickable",onClick:function(){return t.sortProfileFirst(y.FlexTop.getTypical())},children:"Flex Top"})})]})})}var k=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:"19",style:{textAlign:"left"},children:this.props.comparator.isAnyCompared()?this.renderNonEmpty():this.renderEmpty()})})}},{key:"renderEmpty",value:function(){return Object(a.jsx)("span",{children:"Use the \u271a icon next to a producer name to add the mast to the comparison."})}},{key:"renderNonEmpty",value:function(){var e=this;return Object(a.jsx)("button",{onClick:function(){return e.props.comparator.removeAll()},children:"Remove all compared masts above."})}}]),r}(f.a.Component),C=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.comparator;return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{className:"header",children:["Producer",Object(a.jsx)("span",{title:"Sort ascending by producer name",className:"clickable left-padded",onClick:function(){return e.sortByNameAscending()},children:"\u25b2"}),Object(a.jsx)("span",{title:"Sort descending by producer name",className:"clickable",onClick:function(){return e.sortByNameDescending()},children:"\u25bc"})]}),Object(a.jsx)("td",{className:"header",children:"Year"}),Object(a.jsx)("td",{className:"header",children:"Diameter"}),Object(a.jsx)("td",{className:"header",children:"Length"}),this.getProfileColumns()]})}},{key:"getProfileColumns",value:function(){for(var e=this,t=this.props.comparator,r=Array(15),n=function(n){r[n-1]=Object(h.createElement)("td",Object(s.a)(Object(s.a)({},e.props),{},{key:n,className:t.getProfileClassName(n)}),Object(a.jsx)("span",{title:"Sort this profile first",className:"clickable",onClick:function(){return t.sortProfileFirst(n)},children:"\u25bc"}))},i=1;i<=r.length;i++)n(i);return r}}]),r}(f.a.Component);function N(e){var t=e.comparator;return e.masts.map((function(r){return Object(h.createElement)(M,Object(s.a)(Object(s.a)({},e),{},{mast:r,buttons:(n=r,[Object(a.jsx)("span",{title:"Remove from comparison",className:"clickable",onClick:function(){return t.remove(n)},children:"\u2716"},"remove")]),key:r.id}));var n}))}function P(e){var t=e.comparator;return e.masts.filter((function(r){return!t.isCompared(r)&&e.filter(r)})).map((function(r){return Object(h.createElement)(M,Object(s.a)(Object(s.a)({},e),{},{mast:r,buttons:(n=r,[Object(a.jsx)("span",{title:"Add to comparison",className:"clickable",onClick:function(){return t.compare(n)},children:"\u271a"},"add")]),key:r.id}));var n}))}function M(e){return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{className:"mast-name",children:[e.buttons,Object(a.jsx)("span",{className:"left-padded",children:e.mast.name})]}),Object(a.jsx)("td",{children:e.mast.year}),Object(a.jsx)("td",{children:e.mast.diameter}),Object(a.jsx)("td",{children:e.mast.length}),Object(a.jsx)(S,Object(s.a)({},e))]})}var S=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(){return Object(l.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return this.calculateColumnValues(this.props.mast.profile).map((function(t,r){return e.renderColumn(r+1,t)}))}},{key:"renderColumn",value:function(e,t){var r=this.props.comparator;return Object(a.jsx)("td",{className:r.getProfileClassName(e),children:t?this.renderClickableMark((function(){return r.sortProfileFirst(e)})):""},e)}},{key:"renderClickableMark",value:function(e){return Object(a.jsx)("span",{className:"clickable",onClick:e,children:"\u25cf"})}},{key:"calculateColumnValues",value:function(e){for(var t=new Array(15),r=0;r<t.length;r++)t[r]=Math.abs(e-(r+1))<=1;return t}}]),r}(f.a.Component);r(17);i.a.render(Object(a.jsx)(x,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.a785ddf4.chunk.js.map